%-------------------------------------------------------------------------------
% File:		    Proposal.tex
% Author:	    Igor Janjic, Danny Duangphachanh, Daniel Friedman
% Description:	[ECE 4564] Network Applications Design
%		        Project proposal report.
%%------------------------------------------------------------------------------ 

\input{./Preamble.tex}
\input{./Definitions.tex}
\input{./Programming.tex}

% Make compact sections.
\usepackage[compact]{titlesec}

\begin{document}

\input{./Title.tex}

\section{Concept of Operations}
The purpose of PiFeed is to be able to remotely monitor and control a fish tank
and cat feeder from the internet. The system will be composed of two
Raspberry Pi's and one computer. Rasp1 will collect information about the fish
tank and control the fish feeder. Rasp2 will collect information about the cat
and control the cat feeder. A user will interface with the two Raspberry Pi's
with a client application and be able to monitor both the aquarium and the cat
feeder using Pi cameras. Additionally the client application will allow the user
to customize the feeders and control them manually. We will consider the system
successful if our pets can be fed remotely. The ability to maintain a healthy
eating schedule for pets is a concern for members of our group, as well as many
others who travel or are away from home for an extended amount of time. By
euccessfully implementing a pet feeding and monitoring system using Raspberry
Pis, the stresses of animal care while away will be a thing of the past! A
high level overview of Rasp1 is described in Figure~\ref{fig:highFish} and of
Rasp2 in Figure~\ref{fig:highCat}.

\begin{figure}[H]
    \centering
    \begin{minipage}[b]{0.45\linewidth}
        \centering
        \captionsetup{justification=centering, margin = 0.5cm}
        \includegraphics[scale=0.3]{images/FishTank} 
        \caption{Diagram of Rasp1. (a) Aquarium. (b) Pi camera used for
        monitoring fish. (c) Sensors used for monitoring aquarium environment.
        (d) Automatic fish food feeder.}
        \label{fig:highFish}
    \end{minipage}
    \quad
    \begin{minipage}[b]{0.45\linewidth}
        \centering
        \captionsetup{justification=centering, margin = 0.5cm}
        \includegraphics[scale=0.4]{images/Cat} 
        \caption{Diagram of Rasp2. (a) Automatic cat food feeder and sensors.
        (b) Automatic cat water feeder (c) Pi camera used for monitoring cat.
        (d) LCD display.}
        \label{fig:highCat}
    \end{minipage}
\end{figure}

\section{System Overview}
PiFeed is separated into the following modules: PiFeedControl, PiFeedFish, and
PiFeedCat. The programming language that will be used is Python. Rabbitmq will
be used for publishing the sensor information and images from both the fish tank
and cat bowls to a message broker that the PiFeedControl client application can
subscribe to. The Rabbitmq server will be located on a machine on the same
network that Rasp1 and Rasp2 are connected on. Python sockets will be used for
controlling the feeders remotely and the LCD connected to Rasp2.

\subsection{PiFeedControl}
The purpose of this module is to be able to allow a user to remotely access and
control the feeders as well as write messages to the LCD display connected to
Rasp2. The module is a python client application and can be run using either the
local network or the internet. It will talk to PiFeedCat and PiFeedFish by
subscribing to a message broker that routes the messages from the two modules.
It will use sockets to manually start the feeders and configure the feeders for
automatic feeding as well as for writing to the LCD display connected to Rasp2.

\subsection{PiFeedCat}
The purpose of this module is to publish messages to a message broker containing
information generated by the sensors on the cat bowls as well as images from the
Pi camera mounted on the bowls. It also controls the hardware for the automatic
cat feeder and the LCD.

\subsection{PiFeedFish}
The purpose of this module is to publish messages to a message broker containing
information generated by the sensors on the fish tank as well as images from the
Pi camera mounted on the tank. It also controls the hardware for the automatic
fish tank feeder.

\subsection{Testable Requirements}
A completely successful project should demonstrate that the following requirements
are satisfied.
\begin{enumerate}
    \item PiFeedControl is able to remotely feed the fish both manually and at
          specific times of the day.
    \item PiFeedControl is able to remotely feed the cat both manually and at
          specific times of the day.
    \item PiFeedControl is able to remotely monitor the fish using the Pi camera.
    \item PiFeedControl is able to remotely monitor the cat using the Pi camera.
    \item PiFeedControl is able to remotely view the fish tank sensors.
    \item PiFeedControl is able to remotely view the cat sensors.
    \item PiFeedFish is able to feed the fish.
    \item PiFeedFish is able to interface with the sensors on the fish tank and
          get correct readings.
    \item PiFeedCat is able to feed the cat.
    \item PiFeedCat is able to interface with the sensors on the cat bowls and
          get correct readings.
\end{enumerate}

\subsection{Use Case Diagram}

\begin{figure}[H]
    \centering
    \captionsetup{justification=centering, margin = 0.5cm}
    \includegraphics[scale=0.4]{images/UseCase} 
    \caption{Use case diagram for the entire system. A user interfaces with a
    client program on a laptop that connects to a RabbitMQ message broker to
    remotely monitor the fish tank and cat. Sockets allow the controller to
    configure feeders and manually control them as well as to write messages to
    the LCD connected.}
    \label{fig:UseCase}
\end{figure}

Figure~\ref{fig:UseCase} shows the different users that will be interacting with
the system. A user interfaces withe the whole system using a command line
application called PiFeedControl. This application subscribes to an exchange on
a RabbitMQ server containing two different message queues, one for each feeder.
PiFeedControl will then be able to receive messages from the pi's containing both
the readings of the sensors and images from the cameras on the Pi's. PiFeedControl
will also be able to configure the feeders and manually control them using a
custom socket protocol.

\section{Hardware List}
\begin{enumerate}
    \item 2 Raspberry Pi boards (borrowing already)
    \item 2 SD cards (16GB) (borrowing already)
    \item 2 WiFi + Bluetooth 3.0 USB adaptors (borrowing already)
    \item 2 MicroUSB cables (borrowing already)
    \item 2 USB chargers (borrowing already)
    \item 2 5MP camera board modules (owned)
    \item Cheap Pi LCD display (need to borrow)
    \item Servos (owned)
    \item Jumper wires (need to borrow)
    \item DS18B20 waterproof temperature sensor (need to borrow)
    \item Adafruit PIR Motion Sensor (need to borrow)

\end{enumerate}

\section{GitHub Details}
\begin{tabular}{ l c l c l}
    \textbf{Team Member} & :: & \textbf{PID} & :: & \textbf{GitHub} \\
    Daniel Friedman      & :: & adfriedm     & :: & adfriedm        \\
    Danny Duangphachanh  & :: & bboydd       & :: & daduang         \\
    Igor Janjic          & :: & ijanjic      & :: & zergler
\end{tabular}

\section{Project Schedule}

\subsection{Development Tasks}
\begin{enumerate}
    \item Get hardware components (Everyone)
    \item Set up fish tank and get a cat food and water bowl (Igor)
    \item Design fish tank automated feeder (Everyone)
    \item Design cat automated feeder (Everyone)
    \item Build fish tank automated feeder design (Everyone)
    \item Build cat automated feeder (Everyone)
    \item Connect hardware components (Danny)
    \item Write PiFeedControl python module (Igor)
    \item Write PiFeedCat python module (Danny)
    \item Write PiFeedFish python module (Daniel)
    \item Test all hardware component interfaces (Everyone)
    \item Test PiFeedControl python module interface (Everyone)
    \item Test PiFeedFish (Everyone)
    \item Test PiFeedCat (Everyone)
    \item Test communication between PiFeedCat and PiFeedFish with
          PiFeedControler (Everyone)
    \item Beta build demonstration (Everyone)
    \item Final demonstration (Everyone)

\end{enumerate}

\subsection{Milestones}
\begin{enumerate}
    \item Beta build demonstration (12-01-14): For the beta build demonstration,
    we will demonstrate that the raspberry pi can collect images from both
    raspberry pi's and send them to the controller client program using
    RabbitMQ.
    \item Final demonstration (12-16-14): For the final demonstration, we will
    show that we have satisfied all of our requirements.
\end{enumerate}

\begin{figure}{H}
    \centering
    \captionsetup{justification=centering, margin = 0.5cm}
    \includegraphics[scale=0.3]{images/Gant} 
    \caption{Gant chart of the proposed schedule.}
    \label{fig:gant}
\end{figure}


\end{document}
